# Máquina vulnerable de vulnhub
Dificultad: 
  Fácil

Fuente:
  https://www.vulnhub.com/entry/basic-pentesting-1,216/

<img src="https://www.vulnhub.com/media/img/entry/watermarked/abee4bba0a38da507a6e8697537f04af9dfa63a6.png" align="top" width="640" height="480"></img>

# Explotación de la máquina
Averiguramos la ip de la máquina a explotar
nmap -sL 192.168.56.0/24<br>
Nmap scan report for vtcsec (192.168.56.103)<p>
<img src="https://github.com/aguayro/ciberseguridad/blob/a745f89a3fc90a98d3a4f07b21de74ac652dc09a/pentesting/vulnhub/csec/img/nmap-01.png" align="top"></img>

Descubrir los puertos abiertos en la máquina<br>
nmap -p- -n -sC -sV -sS 192.168.56.103 -oN csec.txt<br>
<img src="https://github.com/aguayro/ciberseguridad/blob/9d7277331e01053a7b9794343b4afd07f7897f5a/pentesting/vulnhub/csec/img/nmap-02.png" align="top"></img>

Resulta interesante el parametro -vvv del nmap<br>
nmap -vvv 192.168.56.103<br>
<img src="https://github.com/aguayro/ciberseguridad/blob/53901a26143a93b583d1ade1f88935691a55f379/pentesting/vulnhub/csec/img/nmap-03.png" align="top"></img>

## Explotación de las vulnerabilidades
La máquina tiene abiertos los siguientes puertos:
<ul>
  <li>21 ftp ProFTPD 1.3.3c</li>
  <li>22 ssh OpenSSH 7.2p2 Ubuntu 4ubuntu2.2</li>
  <li>80 http Apache/2.4.18 (Ubuntu)</li>
</ul>
    
<p></p>
Veamos que vulnerabilidades tiene los servicios indicados:<br>
nmap -script=vuln 192.168.56.103<br>

<img src="https://github.com/aguayro/ciberseguridad/blob/90586e32fd3113ce47e72e032c3452ac827ea62c/pentesting/vulnhub/csec/img/nmap-04.png" align="top"></img>  

### Servicio proftp 1.3.3c
La versión del proftp 1.3.3c tiene una puerta trasera que puede ser explotada<br>
    
searchsploit proftp 1.3.3c
<img src="https://github.com/aguayro/ciberseguridad/blob/b3316b172c48a3a956056b56326f179c04370e7d/pentesting/vulnhub/csec/img/proftp-01.png" align="top"></img> 

Tenemos dos script para poder usar para explotar la vulnerabilidad del servicio de puerta trasera, un script realizado en python y el otro para el framework metasploit
  
### Open ssh 7.2p2
Nmap no detecta ninguna vulnerabilidad en el servicio, pero si buscamos por searchsploit nos devuelve algunas cositas.
<img src="https://github.com/aguayro/ciberseguridad/blob/b13203f5b3d251772fd995fc7967ec690883c828/pentesting/vulnhub/csec/img/open-ssh-01.png" align="top"></img> 

Es posible realizar enumeración de los usuarios, por otro lado buscando en internet nos aparecen varias referencias a vulnerabilidad en versiones anteriores 

<a href="https://thehackernews.com/2023/07/new-openssh-vulnerability-exposes-linux.html">Vulnerabilidad openssh < 9.2</a>

### Apache httpd 2.4.18
Nmap nos reportado vulnerable a ataque DOS, buscamos información sobre posibles fallos en la versión de apache 2.4.18 y encontramos lo siguiente:<br>

searchsploit apache 2.4.18
<img src="https://github.com/aguayro/ciberseguridad/blob/96659ac542e55b25fa49831a77b3881da6f26b60/pentesting/vulnhub/csec/img/apache-01.png" align="top"></img> 

Vulnerabilidad de apache que permite la escalación de privilegios: CVE-2019-0211<br>
<img src="https://github.com/aguayro/ciberseguridad/blob/841df8e72fdfcb8f6714df3ae4d7d29437f65a6a/pentesting/vulnhub/csec/img/apache-02.png" align="top"></img> 

Vulnerabilidad de memory leak: CVE-2017-9798<br>
<img src="https://github.com/aguayro/ciberseguridad/blob/aa60a0c51dd73f839bc34c3d3c09817d829f5e8d/pentesting/vulnhub/csec/img/apache-03.png" align="top"></img> 

Por otro lado hay que investigar que se esconde dentro de la carpeta /secret

<hr>

# Vectores de ataque:
## Vulnerabilidad proftp 1.3.3c

## Vulnerabilidad open ssh 7.2p2

## Vulnerabilidad Apache 2.4.18

  
